<div class="categorias-content">
  <div class="categorias-wrapper">
    <div class="content-header">
      <div class="header-left">
        <h2 class="page-title">Categorías</h2>
        <p class="page-description">Administra las categorías de contenido multimedia</p>
      </div>

      @if (role === 'admin') {
      <div class="header-right">
        <button class="btn-nueva-categoria" [routerLink]="['/admin','categories','nuevo']">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="5" x2="12" y2="19"></line>
            <line x1="5" y1="12" x2="19" y2="12"></line>
          </svg>
          Nueva Categoría
        </button>
      </div>
      }

    </div>
    
    <div class="categorias-grid">
      <div *ngFor="let categoria of categorias" class="categoria-card">
        <div class="card-image">
          <div class="image-placeholder">
    <img 
      [src]="categoria.imagenUrl"[alt]="categoria.nombre" class="categoria-img" (error)="onImageError($event)" />
          </div>
          <div class="card-badges">
            <span class="badge-contenidos">{{ categoria.totalContenidos }} contenidos</span>
            <span 
              class="badge-estado" 
              [class.activa]="categoria.estado === 'Activo'"
              [class.inactiva]="categoria.estado === 'Inactivo'"
            >
              {{ categoria.estado }}
            </span>
          </div>
        </div>
        
        @if(role === 'admin'){
        <div class="card-content">
          <div class="card-header-info">
            <h3 class="card-title">{{ categoria.nombre }}</h3>
            <div class="card-toggle">
              <label class="toggle-switch">
                <input 
                  type="checkbox" 
                  [checked]="categoria.estado === 'Activo'"
                  (change)="onToggleEstado(categoria)"
                >
                <span class="toggle-slider"></span>
              </label>
            </div>
          </div>
          
          <p class="card-description">{{ categoria.descripcion }}</p>
          
          <div class="card-actions">
            <button class="btn-action btn-editar" (click)="onEditarCategoria(categoria)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
              Editar
            </button>
            <button class="btn-action btn-eliminar" (click)="onEliminarCategoria(categoria)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              Eliminar
            </button>
          </div>
        </div>          
        }

        @if(role === 'reportero'){
        <div class="card-content">
          <div class="card-header-info">
            <h3 class="card-title">{{ categoria.nombre }}</h3>
          </div>
          
          <p class="card-description">{{ categoria.descripcion }}</p>
          
          <div class="card-actions">
            <button class="btn-action btn-editar" (click)="onVerCategoria(categoria)">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M2.05 12a9.94 9.94 0 0 1 19.9 0a9.94 9.94 0 0 1-19.9 0z"></path>
              </svg>
              Ver
            </button>
          </div>
        </div>          
        }        

      </div>

      <!-- Mensaje cuando no hay categorías -->
      <div *ngIf="categorias.length === 0" class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
        <h3>No hay categorías creadas</h3>
        <p>Comienza creando tu primera categoría de contenido</p>
        <button class="btn-primary" [routerLink]="['/admin','categories','nuevo']">
          Crear Primera Categoría
        </button>
      </div>
    </div>
  </div>
</div>