<div class="contents-content">
  <div class="contents-wrapper">
    <div class="content-header">
      <button class="btn-back" (click)="goBack()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        <span>Volver</span>
      </button>
      <div class="header-left">
        <h2 class="page-title">Nuevo Usuario</h2>
        <p class="page-description">Completa los datos para crear un nuevo usuario</p>
      </div>
    </div>

    <div class="content-body">
      <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
        <div class="dashboard-card">
          <div class="card-header">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            <div class="card-header-content">
              <h3 class="card-title">Información del Usuario</h3>
            </div>
          </div>
          
          <div class="card-body">
            <!-- Usuario (Deshabilitado) -->
            <div class="form-group">
              <label for="username" class="form-label">Usuario</label>
              <input 
                type="text" 
                id="username" 
                class="form-control"
                formControlName="username"
                [class.is-invalid]="userForm.get('username')?.invalid && (userForm.get('username')?.dirty || userForm.get('username')?.touched || submitted)"
                placeholder="admin"
              />
              <div class="invalid-feedback" *ngIf="userForm.get('username')?.invalid && (userForm.get('username')?.dirty || userForm.get('username')?.touched || submitted)">
                El usuario es requerido
              </div>              
            </div>

            <!-- Nombre Completo -->
            <div class="form-group">
              <label for="fullName" class="form-label">
                Nombre Completo <span class="required">*</span>
              </label>
              <input 
                type="text" 
                id="fullName" 
                class="form-control"
                [class.is-invalid]="userForm.get('fullName')?.invalid && (userForm.get('fullName')?.dirty || userForm.get('fullName')?.touched || submitted)"
                placeholder="Ej: Administrador Principal"
                formControlName="fullName"
              />
              <div class="invalid-feedback" *ngIf="userForm.get('fullName')?.invalid && (userForm.get('fullName')?.dirty || userForm.get('fullName')?.touched || submitted)">
                El nombre completo es requerido
              </div>
            </div>

            <!-- Rol -->
            <div class="form-group">
              <label for="role" class="form-label">
                Rol <span class="required">*</span>
              </label>
              <select 
                id="role" 
                class="form-control form-select"
                [class.is-invalid]="userForm.get('role')?.invalid && (userForm.get('role')?.dirty || userForm.get('role')?.touched || submitted)"
                formControlName="role"
              >
                <option value="">Selecciona un rol</option>
                <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
              </select>
              <p class="form-text">Define los permisos del usuario en el sistema</p>
              <div class="invalid-feedback" *ngIf="userForm.get('role')?.invalid && (userForm.get('role')?.dirty || userForm.get('role')?.touched || submitted)">
                El rol es requerido
              </div>
            </div>

            <!-- Estado -->
            <div class="form-group">
              <label class="form-label">Estado</label>
              <div class="toggle-wrapper">
                <label class="toggle-switch">
                  <input 
                    type="checkbox" 
                    formControlName="isActive"
                  />
                  <span class="toggle-slider"></span>
                </label>
                <div class="toggle-content">
                  <span class="toggle-title">Usuario Activo</span>
                  <span class="toggle-description">El usuario puede acceder al sistema</span>
                </div>
              </div>
            </div>


            <!-- Botones de acción -->
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                  <polyline points="17 21 17 13 7 13 7 21"></polyline>
                  <polyline points="7 3 7 8 15 8"></polyline>
                </svg>
                Crear Usuario
              </button>
              <button type="button" class="btn btn-secondary" (click)="onCancel()">
                Cancelar
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>